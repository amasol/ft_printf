1)  Считываю по одному символу char, если не вижу %, то сразу вывожу
    текс;
2)